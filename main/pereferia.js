let goodsDB = [
    // Мониторы
    {
        id: 72,
        title: "Монитор DEXP DF22N2S",
        price: "7 699,00 ₽",
        imgSrc: "/main/image/DEXPDF22N2S.webp",
        details: [
            "Диагональ экрана (дюйм): 21.45",
            "Максимальное разрешение: 1920x1080",
            "Технология изготовления матрицы: VA",
            "Максимальная частота обновления экрана(Гц): 75",
            "Видеоразъемы: HDMI, VGA (D-Sub)",
            "Цвет: Чёрный"
        ],
        type: "monitor"
    },
    {
        id: 73,
        title: "Монитор ARDOR GAMING PORTAL",
        price: "13 999,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGPORTAL.webp",
        details: [
            "Диагональ экрана (дюйм): 23.8",
            "Максимальное разрешение: 1920x1080",
            "Технология изготовления матрицы: VA",
            "Максимальная частота обновления экрана(Гц): 144",
            "Видеоразъемы: DisplayPort 1.4 x2, HDMI 2.0 x2",
            "Цвет: Чёрный"
        ],
        type: "monitor"
    },
    {
        id: 74,
        title: "Монитор LG UltraGear",
        price: "32 999,00 ₽",
        imgSrc: "/main/image/LGUltraGear27GR75Q-B.webp",
        details: [
            "Диагональ экрана (дюйм): 27",
            "Максимальное разрешение: 2560x1440",
            "Технология изготовления матрицы: IPS",
            "Максимальная частота обновления экрана(Гц): 165",
            "Видеоразъемы: DisplayPort 1.4 x1, HDMI 2.0 x2",
            "Цвет: Чёрный"
        ],
        type: "monitor"
    },
    {
        id: 75,
        title: "Монитор ARDOR GAMING PORTAL",
        price: "14 399,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGPORTALAF24H1.webp",
        details: [
            "Диагональ экрана (дюйм): 23.8",
            "Максимальное разрешение: 1920x1080",
            "Технология изготовления матрицы: IPS",
            "Максимальная частота обновления экрана(Гц): 144",
            "Видеоразъемы: DisplayPort 1.4 x2, HDMI 2.0 x2",
            "Цвет: Белый"
        ],
        type: "monitor"
    },
    {
        id: 76,
        title: "Монитор Xiaomi G27Qi",
        price: "20 999,00 ₽",
        imgSrc: "/main/image/XiaomiG27Qi.webp",
        details: [
            "Диагональ экрана (дюйм): 27",
            "Максимальное разрешение: 2560x1440",
            "Технология изготовления матрицы: IPS",
            "Максимальная частота обновления экрана(Гц): 180",
            "Видеоразъемы: DisplayPort 1.4 x2, HDMI 2.0 x2",
            "Цвет: Чёрный"
        ],
        type: "monitor"
    },
    {
        id: 77,
        title: "Монитор ASUS TUF Gaming",
        price: "38 999,00 ₽",
        imgSrc: "/main/image/ASUSTUFGamingVG27AQ1A.webp",
        details: [
            "Диагональ экрана (дюйм): 27",
            "Максимальное разрешение: 2560x1440",
            "Технология изготовления матрицы: IPS",
            "Максимальная частота обновления экрана(Гц): 170",
            "Видеоразъемы: DisplayPort 1.4 x1, HDMI 2.0 x2",
            "Цвет: Чёрный"
        ],
        type: "monitor"
    },
    {
        id: 78,
        title: "Монитор MSI G255F черный",
        price: "15 499,00 ₽",
        imgSrc: "/main/image/MSIG255F.webp",
        details: [
            "Диагональ экрана (дюйм): 24.5",
            "Максимальное разрешение: 1920x1080",
            "Технология изготовления матрицы: IPS",
            "Максимальная частота обновления экрана(Гц): 180",
            "Видеоразъемы: DisplayPort 1.2a x1, HDMI 2.0 x2",
            "Цвет: Чёрный"
        ],
        type: "monitor"
    },
    {
        id: 79,
        title: "Монитор ARDOR GAMING SUPERNOVA PRO",
        price: "32 999,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGSUPERNOVAPRO.webp",
        details: [
            "Диагональ экрана (дюйм): 31.5",
            "Максимальное разрешение: 2560x1440",
            "Технология изготовления матрицы: IPS",
            "Максимальная частота обновления экрана(Гц): 165",
            "Видеоразъемы: DisplayPort 1.4 x1, HDMI 2.0 x2 USB х3",
            "Цвет: Чёрный"
        ],
        type: "monitor"
    },
    {
        id: 80,
        title: "Монитор Samsung Odyssey G5",
        price: "33 999,00 ₽",
        imgSrc: "/main/image/SamsungOdysseyG5.webp",
        details: [
            "Диагональ экрана (дюйм): 34",
            "Максимальное разрешение: 3440x1440",
            "Технология изготовления матрицы: VA",
            "Максимальная частота обновления экрана(Гц): 165",
            "Видеоразъемы: DisplayPort 1.4 x1, HDMI 2.0 x1 USB х1",
            "Цвет: Чёрный"
        ],
        type: "monitor"
    },

    // Мыши
    {
        id: 81,
        title: "Мышь проводная ARDOR GAMING Fury",
        price: "1 750,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGFury.webp",
        details: [
            "Тип подключения: проводная",
            "Максимальное разрешение датчика: 12400 dpi",
            "Подсветка: RGB",
            "Скорость (IPS): 220",
            "Цвет: Чёрный"
        ],
        type: "mouse"
    },
    {
        id: 82,
        title: "Мышь беспроводная Logitech G304 LIGHTSPEED",
        price: "4 499,00 ₽",
        imgSrc: "/main/image/LogitechG304LIGHTSPEED.webp",
        details: [
            "Тип подключения: беспроводная",
            "Максимальное разрешение датчика: 12000 dpi",
            "Подсветка: RGB",
            "Скорость (IPS): 400",
            "Цвет: Чёрный"
        ],
        type: "mouse"
    },
    {
        id: 83,
        title: "Мышь беспроводная/проводная ARDOR GAMING Phantom PRO",
        price: "5 599,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGPhantomPRO.webp",
        details: [
            "Тип подключения: беспроводная, проводная",
            "Максимальное разрешение датчика: 26000 dpi",
            "Интерфейс подключения: USB Type-A, радиоканал",
            "Подсветка: RGB",
            "Скорость (IPS): 650",
            "Цвет: Чёрный"
        ],
        type: "mouse"
    },
    {
        id: 84,
        title: "Мышь беспроводная/проводная LAMZU Atlantis V2 BK MCU 1K",
        price: "7 999,00 ₽",
        imgSrc: "/main/image/LAMZUAtlantisV2BKMCU1K.webp",
        details: [
            "Тип подключения: беспроводная, проводная",
            "Максимальное разрешение датчика: 26000 dpi",
            "Интерфейс подключения: USB Type-A, радиоканал",
            "Подсветка: RGB",
            "Скорость (IPS): 650",
            "Цвет: Чёрный"
        ],
        type: "mouse"
    },
    {
        id: 85,
        title: "Мышь проводная Logitech G502 HERO",
        price: "5 699,00 ₽",
        imgSrc: "/main/image/LogitechG502HERO.webp",
        details: [
            "Тип подключения: проводная",
            "Максимальное разрешение датчика: 16000 dpi",
            "Интерфейс подключения: USB Type-A",
            "Подсветка: RGB",
            "Скорость (IPS): 400",
            "Цвет: Чёрный"
        ],
        type: "mouse"
    },
    {
        id: 86,
        title: "Мышь беспроводная ARDOR GAMING Agile PRO",
        price: "6 499,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGAgilePRO.webp",
        details: [
            "Тип подключения: беспроводная",
            "Максимальное разрешение датчика: 26000 dpi",
            "Интерфейс подключения: USB Type-A радиоканал",
            "Подсветка: RGB",
            "Скорость (IPS): 650",
            "Цвет: Чёрный"
        ],
        type: "mouse"
    },
    {
        id: 87,
        title: "Мышь беспроводная Logitech G PRO X SUPERLIGHT",
        price: "12 899,00 ₽",
        imgSrc: "/main/image/LogitechGPROXSUPERLIGHT.webp",
        details: [
            "Тип подключения: беспроводная",
            "Максимальное разрешение датчика: 25600 dpi",
            "Интерфейс подключения: USB Type-A радиоканал",
            "Подсветка: RGB",
            "Скорость (IPS): 400",
            "Цвет: Белый"
        ],
        type: "mouse"
    },
    {
        id: 88,
        title: "Мышь беспроводная/проводная ARDOR GAMING Phantom PRO",
        price: "5 599,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGPhantomPROwhite.webp",
        details: [
            "Тип подключения: беспроводная/проводная",
            "Максимальное разрешение датчика: 26000 dpi",
            "Интерфейс подключения: USB Type-A, радиоканал",
            "Подсветка: RGB",
            "Скорость (IPS): 650",
            "Цвет: Белый"
        ],
        type: "mouse"
    },

    // Наушники
    {
        id: 89,
        title: "Беспроводные наушники Logitech G435",
        price: "9 299,00 ₽",
        imgSrc: "/main/image/LogitechG435.webp",
        details: [
            "Тип подключения: Bluetooth радиоканал",
            "Максимальная воспроизводимая частота(Гц): 20000",
            "Цвет: Чёрный"
        ],
        type: "headphones"
    },
    {
        id: 90,
        title: "Беспроводные/проводные наушники ARDOR GAMING Vault",
        price: "5 599,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGVault.webp",
        details: [
            "Тип подключения: Bluetooth, радиоканал, провод",
            "Максимальная воспроизводимая частота(Гц): 20000",
            "Цвет: Чёрный"
        ],
        type: "headphones"
    },
    {
        id: 91,
        title: "Беспроводные наушники Дарк Проджект HS5 Wireless V2",
        price: "8 999,00 ₽",
        imgSrc: "/main/image/ДаркПроджектHS5.webp",
        details: [
            "Тип подключения: Bluetooth, радиоканал",
            "Максимальная воспроизводимая частота(Гц): 20000",
            "Цвет: Чёрный"
        ],
        type: "headphones"
    },
    {
        id: 92,
        title: "Беспроводные наушники Logitech G733",
        price: "17 499,00 ₽",
        imgSrc: "/main/image/LogitechG733.webp",
        details: [
            "Тип подключения: радиоканал",
            "Максимальная воспроизводимая частота(Гц): 20000",
            "Цвет: Чёрный"
        ],
        type: "headphones"
    },
    {
        id: 93,
        title: "Проводные наушники Fifine H6",
        price: "3 999,00 ₽",
        imgSrc: "/main/image/FifineH6.png",
        details: [
            "Тип подключения: провод",
            "Максимальная воспроизводимая частота(Гц): 20000",
            "Цвет: Белый"
        ],
        type: "headphones"
    },
    {
        id: 94,
        title: "Проводные наушники HyperX Cloud Alpha S",
        price: "12 299,00 ₽",
        imgSrc: "/main/image/HyperXCloudAlphaS.webp",
        details: [
            "Тип подключения: провод",
            "Максимальная воспроизводимая частота(Гц): 27000",
            "Цвет: Чёрный"
        ],
        type: "headphones"
    },
    {
        id: 95,
        title: "Проводные наушники Razer BlackShark V2 X",
        price: "7 299,00 ₽",
        imgSrc: "/main/image/RazerBlackSharkV2.webp",
        details: [
            "Тип подключения: провод",
            "Максимальная воспроизводимая частота(Гц): 28000",
            "Цвет: Чёрный"
        ],
        type: "headphones"
    },
    {
        id: 96,
        title: "Наушники TWS JBL WAVE BEAM",
        price: "5 999,00 ₽",
        imgSrc: "/main/image/TWSJBLWAVEBEAM.webp",
        details: [
            "Тип подключения: Bluetooth",
            "Максимальная воспроизводимая частота(Гц): 20000",
            "Цвет: Чёрный"
        ],
        type: "headphones"
    },
    {
        id: 97,
        title: "Беспроводные наушники JBL Tune 520BT",
        price: "4 999,00 ₽",
        imgSrc: "/main/image/JBLTune520BT.webp",
        details: [
            "Тип подключения: Bluetooth",
            "Максимальная воспроизводимая частота(Гц): 20000",
            "Цвет: Чёрный"
        ],
        type: "headphones"
    },
    {
        id: 98,
        title: "Клавиатура проводная Red Square Keyrox TKL Aquarius",
        price: "5 299,00 ₽",
        imgSrc: "/main/image/RedSquareKeyroxTKLAquarius.webp",
        details: [
            "Тип подключения: проводная",
            "Формат клавиатуры: TKL (80%)",
            "Тип клавиатуры: механическая",
            "Цвет подсветки клавиш: RGB",
            "Материал кейкапов: ABS",
            "Цвет: Белый"
        ],
        type: "keyboard"
    },
    {
        id: 99,
        title: "Клавиатура проводная ARDOR GAMING Blade",
        price: "5 199,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGBlade.webp",
        details: [
            "Тип подключения: проводная",
            "Формат клавиатуры: (100%)",
            "Тип клавиатуры: механическая",
            "Цвет подсветки клавиш: RGB",
            "Материал кейкапов: PBT",
            "Цвет: Чёрный"
        ],
        type: "keyboard"
    },
    {
        id: 100,
        title: "Клавиатура проводная Дарк Проджект KD87A",
        price: "8 699,00 ₽",
        imgSrc: "/main/image/ДаркПроджектKD87A.webp",
        details: [
            "Тип подключения: проводная",
            "Формат клавиатуры: (80%)",
            "Тип клавиатуры: механическая",
            "Цвет подсветки клавиш: RGB",
            "Материал кейкапов: PBT",
            "Цвет: Чёрный"
        ],
        type: "keyboard"
    },
    {
        id: 101,
        title: "Клавиатура проводная + беспроводная ARDOR GAMING Guardian",
        price: "8 199,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGGuardian.webp",
        details: [
            "Тип подключения: проводная + беспроводная",
            "Формат клавиатуры: (100%)",
            "Тип клавиатуры: механическая",
            "Цвет подсветки клавиш: RGB",
            "Материал кейкапов: PBT",
            "Цвет: Чёрный"
        ],
        type: "keyboard"
    },
    {
        id: 102,
        title: "Клавиатура проводная + беспроводная ARDOR GAMING Patron 75",
        price: "6 799,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGPatron75.webp",
        details: [
            "Тип подключения: проводная + беспроводная",
            "Формат клавиатуры: (75%)",
            "Тип клавиатуры: механическая",
            "Цвет подсветки клавиш: RGB",
            "Интерфейс подключения: Bluetooth, USB Type-A, радиоканал",
            "Материал кейкапов: PBT",
            "Цвет: Чёрный"
        ],
        type: "keyboard"
    },
    {
        id: 103,
        title: "Клавиатура проводная Logitech G412 TKL SE",
        price: "4 399,00 ₽",
        imgSrc: "/main/image/LogitechG412TKLSE.webp",
        details: [
            "Тип подключения: проводная",
            "Формат клавиатуры: TKL(80%)",
            "Тип клавиатуры: механическая",
            "Цвет подсветки клавиш: RGB",
            "Материал кейкапов: PBT",
            "Цвет: Чёрный"
        ],
        type: "keyboard"
    },
    {
        id: 104,
        title: "Клавиатура проводная + беспроводная ARDOR GAMING Katana",
        price: "11 199,00 ₽",
        imgSrc: "/main/image/ARDORGAMINGKatana.webp",
        details: [
            "Тип подключения: проводная/беспроводная",
            "Формат клавиатуры: (100%)",
            "Тип клавиатуры: механическая",
            "Интерфейс подключения: Bluetooth, USB Type-A, радиоканал",
            "Цвет подсветки клавиш: RGB",
            "Материал кейкапов: PBT",
            "Цвет: Чёрный"
        ],
        type: "keyboard"
    },
    {
        id: 105,
        title: "Клавиатура проводная MSI Vigor GK30",
        price: "3 999,00 ₽",
        imgSrc: "/main/image/MSIVigorGK30.webp",
        details: [
            "Тип подключения: проводная",
            "Формат клавиатуры: (100%)",
            "Тип клавиатуры: механическая",
            "Интерфейс подключения: USB Type-A",
            "Цвет подсветки клавиш: RGB",
            "Материал кейкапов: PBT",
            "Цвет: Белый"
        ],
        type: "keyboard"
    },
    {
        id: 106,
        title: "Клавиатура проводная Red Square Keyrox TKL Classic Everfrost",
        price: "6 199,00 ₽",
        imgSrc: "/main/image/RedSquareKeyroxTKLClassicEverfrost.webp",
        details: [
            "Тип подключения: проводная",
            "Формат клавиатуры: (80%)",
            "Тип клавиатуры: механическая",
            "Интерфейс подключения: USB Type-A",
            "Цвет подсветки клавиш: RGB",
            "Материал кейкапов: PBT",
            "Цвет: Фиолетовый"
        ],
        type: "keyboard"
    }
];

// Скрипт для страниц с товарами
if (document.querySelector('.card-electronics') || document.querySelector('.sort-container')) {
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.querySelector('.card-electronics');
        const selectedCategory = localStorage.getItem('selectedCategory') || 'monitor'; // По умолчанию мониторы

        let className, targetContainer;
        switch (selectedCategory) {
            case 'monitor':
                className = 'product-card-monitor';
                targetContainer = document.querySelector('.card-monitor') || document.createElement('div');
                targetContainer.className = 'card-monitor';
                break;
            case 'mouse':
                className = 'product-card-mouse';
                targetContainer = document.querySelector('.card-mouse') || document.createElement('div');
                targetContainer.className = 'card-mouse';
                break;
            case 'headphones':
                className = 'product-card-headphones';
                targetContainer = document.querySelector('.card-headphones') || document.createElement('div');
                targetContainer.className = 'card-headphones';
                break;
            case 'keyboard':
                className = 'product-card-keyboard';
                targetContainer = document.querySelector('.card-keyboard') || document.createElement('div');
                targetContainer.className = 'card-keyboard';
                break;
            default:
                className = 'product-card-monitor';
                targetContainer = document.querySelector('.card-monitor');
        }

        if (!document.querySelector(`.${targetContainer.className}`)) {
            document.body.insertBefore(targetContainer, document.querySelector('footer'));
        }

        function renderGoods(goods, container, className) {
            container.innerHTML = '';
            goods.forEach(good => {
                if (good.type === selectedCategory) {
                    const card = document.createElement('div');
                    card.className = className;
                    card.innerHTML = `
                        <div class="product-image-${className.replace('product-card-', '')}">
                            <img src="${good.imgSrc}" alt="${good.title}">
                        </div>
                        <div class="product-details-${className.replace('product-card-', '')}">
                            <a href=""><h2>${good.title}</h2></a>
                            <ul>${good.details.map(detail => `<li>${detail}</li>`).join('')}</ul>
                        </div>
                        <p class="cena">${good.price}</p>
                        <a href="" class="btn btn-primary add-to-cart" data-id="${good.id}">В корзину</a>
                        <a href="/main/singlepage/iphone15.html" class="btn btn-secondary">Подробнее</a>
                    `;
                    container.appendChild(card);
                }
            });

            attachCartListeners();
        }

        function attachCartListeners() {
            const addToCartButtons = document.querySelectorAll('.add-to-cart');
            const cartCounter = document.getElementById('cart-counter');

            let cartCount = parseInt(localStorage.getItem('cartCount')) || 0;
            cartCounter.textContent = cartCount;

            addToCartButtons.forEach(button => {
                button.addEventListener('click', event => {
                    event.preventDefault();
                    const card = event.target.closest(`.${className}`);
                    const title = card.querySelector('h2').textContent;
                    const price = card.querySelector('.cena').textContent;
                    const imgSrc = card.querySelector('img').src;

                    const product = { title, price, imgSrc, quantity: 1 };

                    let cart = JSON.parse(localStorage.getItem('cart')) || [];

                    const existingProduct = cart.find(item => item.title === product.title);
                    if (existingProduct) {
                        existingProduct.quantity += 1;
                    } else {
                        cart.push(product);
                    }

                    localStorage.setItem('cart', JSON.stringify(cart));

                    cartCount += 1;
                    cartCounter.textContent = cartCount;
                    localStorage.setItem('cartCount', cartCount);

                    const modal = document.getElementById('customModal');
                    modal.classList.add('show');
                });
            });
        }

        const modal = document.getElementById('customModal');
        const continueBtn = document.getElementById('continueShopping');
        const cartBtn = document.getElementById('goToCart');

        continueBtn.addEventListener('click', () => {
            modal.classList.remove('show');
        });

        cartBtn.addEventListener('click', () => {
            window.location.href = '/main/korzina.html';
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.remove('show');
            }
        });

        document.getElementById('sort-order')?.addEventListener('change', function () {
            const sortOrder = this.value;
            const productCards = Array.from(document.querySelectorAll(`.${className}`));
            const container = targetContainer;

            productCards.sort((a, b) => {
                const priceA = parseFloat(a.querySelector('.cena').textContent.replace(/[^\d.-]/g, ''));
                const priceB = parseFloat(b.querySelector('.cena').textContent.replace(/[^\d.-]/g, ''));

                return sortOrder === 'ascending' ? priceA - priceB : priceB - priceA;
            });

            productCards.forEach(card => container.appendChild(card));
        });

        renderGoods(electronicsDB, targetContainer, className); // Используем твою базу electronicsDB
    });
}

// Скрипт для index.html
if (document.querySelector('.link-button')) {
    document.addEventListener('DOMContentLoaded', () => {
        const links = document.querySelectorAll('.link-button button a');

        links.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const category = link.getAttribute('href').split('/').pop().replace('.html', '');
                let type;

                switch (category) {
                    case 'monitor':
                        type = 'monitor';
                        break;
                    case 'keyboard':
                        type = 'keyboard';
                        break;
                    case 'mouse':
                        type = 'mouse';
                        break;
                    case 'yshi': // Ты назвал наушники "yshi" в HTML
                        type = 'headphones';
                        break;
                    default:
                        type = 'monitor';
                }

                localStorage.setItem('selectedCategory', type);
                window.location.href = link.getAttribute('href');
            });
        });

        const cartCounter = document.getElementById('cart-counter');
        let cartCount = parseInt(localStorage.getItem('cartCount')) || 0;
        cartCounter.textContent = cartCount;
    });
}